<section id="admin-ticket-claim" class="section-container">
  <div class="row">
    <div class="title">
      Ticket Claim
    </div>

    <div class="content">
      <div class="info-fields">
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Name</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.name %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Email</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.customer ? @ticket.customer.email : 'Customer has been deleted' %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Booking Reference</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.booking_reference %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Ticket Type</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.ticket_type %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Quantity</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.quantity %>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-12"></div>
          <div class="col-lg-2 col-md-12 field-key">Remaining Quantity</div>
          <div class="col-lg-10 col-md-12 field-value">
            <%= @ticket.total_unclaimed %>
          </div>
        </div>
      </div>

      <br>

      <div class="row">
        <div class="col-lg-12 col-md-12 col-xs-12">
          <%= button_to("Claim Ticket", admin_claim_ticket_path, params: { claim_token: @ticket.claim_token },
                    class: "btn btn-info", disabled: true, data: { confirm: "Do  you want to claim this ticket?" }) %>
        </div>
      </div>

      <% if @ticket.claim_histories.count != 0 %>
        <center> <h1> Ticket claim history </h1> </center>
        <div class="info-fields">
          <% @ticket.claim_histories.each_with_index do |history, idx| %>
            <div class="row">
              <div class="col-lg-12"></div>
              <div class="col-lg-3 col-md-12 field-key">No <%= idx + 1 %>.</div>
              <div class="col-lg-3 col-md-12 field-key"><%= history.claimed_by %></div>
              <div class="col-lg-3 col-md-12 field-key"><%= history.claimed_at.getlocal %></div>
              <div class="col-lg-3 col-md-12 field-key"><%= history.claim_quantity %></div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</section>
